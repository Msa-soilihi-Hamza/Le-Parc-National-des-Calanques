RewriteEngine On

# Pass Authorization header to PHP
RewriteCond %{HTTP:Authorization} .
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

# Handle API routes
RewriteCond %{REQUEST_URI} ^/api/.*
RewriteRule ^(.*)$ api.php [QSA,L]

# Handle web routes (existing functionality)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/api/.*
RewriteRule ^(.*)$ index.php [QSA,L]

# Set default charset
AddDefaultCharset UTF-8